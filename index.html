<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asistente de Declaraci√≥n IAGen Universidad Panamericana</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #B8346D 0%, #8B2450 100%); padding: 20px; min-height: 100vh; }
        .container { max-width: 1000px; margin: 0 auto; background: white; border-radius: 12px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); overflow: hidden; }
        .header { background: linear-gradient(135deg, #B8346D 0%, #8B2450 100%); color: white; padding: 30px; text-align: center; }
        .header h1 { font-size: 28px; margin-bottom: 10px; }
        .header p { font-size: 14px; opacity: 0.9; }
        .progress-container { background: #f5f5f5; padding: 20px 40px; border-bottom: 1px solid #e0e0e0; }
        .progress-steps { display: flex; justify-content: space-between; position: relative; }
        .progress-line { position: absolute; top: 20px; left: 0; right: 0; height: 3px; background: #e0e0e0; z-index: 0; }
        .progress-line-fill { height: 100%; background: #B8346D; transition: width 0.3s ease; }
        .step { display: flex; flex-direction: column; align-items: center; position: relative; z-index: 1; }
        .step-circle { width: 40px; height: 40px; border-radius: 50%; background: #e0e0e0; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #999; margin-bottom: 8px; transition: all 0.3s; }
        .step.active .step-circle { background: #B8346D; color: white; transform: scale(1.1); }
        .step.completed .step-circle { background: #28a745; color: white; }
        .step-label { font-size: 12px; color: #666; text-align: center; }
        .step.active .step-label { color: #B8346D; font-weight: 600; }
        .content { padding: 40px; }
        .step-content { display: none; }
        .step-content.active { display: block; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .step-title { font-size: 24px; color: #333; margin-bottom: 10px; }
        .step-description { color: #666; margin-bottom: 30px; line-height: 1.6; }
        .form-group { margin-bottom: 25px; }
        label { display: block; font-weight: 500; margin-bottom: 8px; color: #333; }
        input[type="text"], input[type="email"], input[type="date"], textarea { width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 6px; font-size: 14px; transition: border-color 0.3s; }
        input:focus, textarea:focus { outline: none; border-color: #B8346D; }
        .radio-group { display: flex; flex-wrap: wrap; gap: 15px; margin-top: 8px; }
        .radio-item { display: flex; align-items: center; padding: 10px 15px; border: 2px solid #e0e0e0; border-radius: 6px; cursor: pointer; transition: all 0.3s; }
        .radio-item:hover { border-color: #B8346D; background: #f8f9ff; }
        .radio-item input { margin-right: 8px; cursor: pointer; }
        .category-section { background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .category-title { font-size: 18px; font-weight: 600; color: #B8346D; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 2px solid #B8346D; }
        .checkbox-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 10px; }
        .checkbox-card { background: white; padding: 12px; border-radius: 6px; border: 2px solid #e0e0e0; cursor: pointer; transition: all 0.3s; }
        .checkbox-card:hover { border-color: #B8346D; box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2); }
        textarea { min-height: 100px; resize: vertical; }
        .buttons { display: flex; justify-content: space-between; gap: 15px; margin-top: 30px; padding-top: 30px; border-top: 2px solid #e0e0e0; }
        button { padding: 12px 30px; font-size: 16px; font-weight: 600; border: none; border-radius: 6px; cursor: pointer; transition: all 0.3s; }
        .btn-primary { background: linear-gradient(135deg, #B8346D 0%, #8B2450 100%); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3); }
        .btn-secondary { background: #f5f5f5; color: #333; }
        .btn-secondary:hover { background: #e0e0e0; }
        button:disabled { opacity: 0.5; cursor: not-allowed; }
        .summary-card { background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .summary-item { margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #e0e0e0; }
        .summary-label { font-weight: 600; color: #B8346D; margin-bottom: 5px; }
        .summary-value { color: #333; }
        .summary-list { margin-left: 20px; color: #666; }
        .alert { padding: 15px; border-radius: 6px; margin-bottom: 20px; }
        .alert-info { background: #d1ecf1; color: #0c5460; border-left: 4px solid #17a2b8; }
        .document-preview { background: white; padding: 40px; border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 20px; font-family: 'Times New Roman', serif; line-height: 1.8; }
        .doc-section-title { font-weight: bold; color: #B8346D; margin: 20px 0 10px 0; }
        .download-section { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 30px; }
        .download-card { background: linear-gradient(135deg, #B8346D 0%, #8B2450 100%); color: white; padding: 25px; border-radius: 8px; text-align: center; cursor: pointer; transition: all 0.3s; }
        .download-card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3); }
        .download-icon { font-size: 40px; margin-bottom: 10px; }
        .download-title { font-size: 18px; font-weight: 600; margin-bottom: 5px; }
        .download-desc { font-size: 12px; opacity: 0.9; }
        .note-box { background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin: 20px 0; border-radius: 4px; }
        .note-box strong { display: block; margin-bottom: 8px; color: #856404; }
        .note-box p { color: #856404; font-size: 13px; line-height: 1.5; margin-bottom: 8px; }
        .autor-card { background: #f8f9fa; padding: 25px; border-radius: 8px; margin-bottom: 20px; border: 2px solid #e0e0e0; }
        .btn-remove-autor { background: #dc3545; color: white; padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; }
        .btn-remove-autor:hover { background: #c82333; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
    <img src="logo.png" alt="Logo Universidad Panamericana" style="height: 80px; margin-bottom: 15px; filter: brightness(0) invert(1);">
    <h1>Asistente de Declaraci√≥n IAGen Universidad Panamericana</h1>
    <p>Sistema Interactivo para Documentar el Uso de Inteligencia Artificial Generativa</p>
</div>
        <div class="progress-container">
            <div class="progress-steps">
                <div class="progress-line"><div class="progress-line-fill" id="progressFill" style="width: 0%"></div></div>
                <div class="step active"><div class="step-circle">1</div><div class="step-label">Autores</div></div>
                <div class="step"><div class="step-circle">2</div><div class="step-label">LLMs</div></div>
                <div class="step"><div class="step-circle">3</div><div class="step-label">√Åreas</div></div>
                <div class="step"><div class="step-circle">4</div><div class="step-label">Detalles</div></div>
                <div class="step"><div class="step-circle">5</div><div class="step-label">Resumen</div></div>
                <div class="step"><div class="step-circle">‚úì</div><div class="step-label">Descargar</div></div>
            </div>
        </div>
        <div class="content">
            <div class="step-content active" id="step1">
                <h2 class="step-title">üë• Informaci√≥n de Autores</h2>
                <p class="step-description">Proporcione la informaci√≥n de los autores responsables del uso de IAGen.</p>
                <div id="autoresContainer">
                    <div class="autor-card" data-autor="1">
                        <h3 style="color: #B8346D; margin-bottom: 15px;">Autor 1 *</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                            <div class="form-group" style="margin-bottom: 0;"><label>Nombre(s): *</label><input type="text" class="autor-nombre" data-autor="1" placeholder="Ej: Juan Carlos"></div>
                            <div class="form-group" style="margin-bottom: 0;"><label>Primer Apellido: *</label><input type="text" class="autor-apellido1" data-autor="1" placeholder="Ej: P√©rez"></div>
                            <div class="form-group" style="margin-bottom: 0;"><label>Segundo Apellido:</label><input type="text" class="autor-apellido2" data-autor="1" placeholder="Ej: Garc√≠a"></div>
                        </div>
                        <div class="form-group"><label>Correo electr√≥nico: *</label><input type="email" class="autor-email" data-autor="1" placeholder="Ej: juan.perez@universidad.edu"></div>
                        <div class="form-group"><label>Afiliaci√≥n institucional: *</label><input type="text" class="autor-afiliacion" data-autor="1" placeholder="Ej: Universidad Nacional, Facultad de Ciencias"></div>
                    </div>
                </div>
                <button class="btn-secondary" onclick="agregarAutor()" style="margin-bottom: 20px; width: 100%;">‚ûï Agregar otro autor</button>
                <div class="form-group">
                    <label>Responsabilidad de los autores: *</label>
                    <div class="radio-group">
                        <div class="radio-item"><input type="radio" name="responsabilidad" value="S√≠, todos los autores registrados compartimos responsabilidad" id="resp-si"><label for="resp-si">S√≠, todos los autores registrados compartimos responsabilidad</label></div>
                        <div class="radio-item"><input type="radio" name="responsabilidad" value="No, solo el primer autor es responsable" id="resp-no"><label for="resp-no">No, solo el primer autor es responsable</label></div>
                    </div>
                </div>
                <div class="buttons"><button class="btn-secondary" disabled>‚Üê Anterior</button><button class="btn-primary" onclick="nextStep()">Siguiente ‚Üí</button></div>
            </div>
            <div class="step-content" id="step2">
                <h2 class="step-title">ü§ñ Modelos de Lenguaje Utilizados</h2>
                <p class="step-description">Especifique los modelos de IA generativa que utiliz√≥.</p>
                <div class="alert alert-info">üí° <strong>Importante:</strong> Incluya la versi√≥n espec√≠fica del modelo.</div>
                <div class="form-group"><label>Nombre del LLM 1: *</label><input type="text" id="llm1" placeholder="Ej: ChatGPT, Claude, Gemini"></div>
                <div class="form-group"><label>Versi√≥n del LLM 1: *</label><input type="text" id="version1" placeholder="Ej: GPT-4, Claude 3.5 Sonnet"></div>
                <div class="form-group"><label>Proveedor: *</label><input type="text" id="proveedor1" placeholder="Ej: OpenAI, Anthropic"></div>
                <div class="form-group"><label>Fecha de uso: *</label><input type="date" id="fecha1"></div>
                <div class="form-group"><label>Nombre del LLM 2:</label><input type="text" id="llm2" placeholder="Opcional"></div>
                <div class="form-group"><label>Versi√≥n del LLM 2:</label><input type="text" id="version2"></div>
                <div class="form-group"><label>Proveedor:</label><input type="text" id="proveedor2"></div>
                <div class="form-group"><label>Fecha de uso:</label><input type="date" id="fecha2"></div>
                <div class="buttons"><button class="btn-secondary" onclick="prevStep()">‚Üê Anterior</button><button class="btn-primary" onclick="nextStep()">Siguiente ‚Üí</button></div>
            </div><div class="step-content" id="step3">
                <h2 class="step-title">üìã √Åreas de Intervenci√≥n de IAGen</h2>
                <p class="step-description">Seleccione todas las √°reas en las que utiliz√≥ IA generativa.</p>
                <div class="category-section">
                    <div class="category-title">Etapa Preliminar</div>
                    <div class="checkbox-grid">
                        <div class="checkbox-card"><input type="checkbox" id="area1" value="Generaci√≥n de ideas"><label for="area1">Generaci√≥n de ideas</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area2" value="Definici√≥n del objetivo"><label for="area2">Definici√≥n del objetivo</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area3" value="Formulaci√≥n de hip√≥tesis"><label for="area3">Formulaci√≥n de hip√≥tesis</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area4" value="Evaluaci√≥n de viabilidad"><label for="area4">Evaluaci√≥n de viabilidad</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area5" value="Prueba de hip√≥tesis"><label for="area5">Prueba de hip√≥tesis</label></div>
                    </div>
                </div>
                <div class="category-section">
                    <div class="category-title">Etapa de Revisi√≥n</div>
                    <div class="checkbox-grid">
                        <div class="checkbox-card"><input type="checkbox" id="area6" value="B√∫squeda de literatura"><label for="area6">B√∫squeda de literatura</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area7" value="Redacci√≥n de revisi√≥n"><label for="area7">Redacci√≥n de revisi√≥n</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area8" value="An√°lisis de tendencias"><label for="area8">An√°lisis de tendencias</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area9" value="Evaluaci√≥n de novedad"><label for="area9">Evaluaci√≥n de novedad</label></div>
                    </div>
                </div>
                <div class="category-section">
                    <div class="category-title">Metodolog√≠a</div>
                    <div class="checkbox-grid">
                        <div class="checkbox-card"><input type="checkbox" id="area10" value="Dise√±o de investigaci√≥n"><label for="area10">Dise√±o de investigaci√≥n</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area11" value="Desarrollo de protocolos"><label for="area11">Desarrollo de protocolos</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area12" value="Selecci√≥n de m√©todos"><label for="area12">Selecci√≥n de m√©todos</label></div>
                    </div>
                </div>
                <div class="category-section">
                    <div class="category-title">Software y Automatizaci√≥n</div>
                    <div class="checkbox-grid">
                        <div class="checkbox-card"><input type="checkbox" id="area13" value="Generaci√≥n de c√≥digo"><label for="area13">Generaci√≥n de c√≥digo</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area14" value="Optimizaci√≥n de c√≥digo"><label for="area14">Optimizaci√≥n de c√≥digo</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area15" value="Automatizaci√≥n"><label for="area15">Automatizaci√≥n</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area16" value="Creaci√≥n de algoritmos"><label for="area16">Creaci√≥n de algoritmos</label></div>
                    </div>
                </div>
                <div class="category-section">
                    <div class="category-title">Gesti√≥n de Datos</div>
                    <div class="checkbox-grid">
                        <div class="checkbox-card"><input type="checkbox" id="area17" value="Recopilaci√≥n de datos"><label for="area17">Recopilaci√≥n de datos</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area18" value="Validaci√≥n"><label for="area18">Validaci√≥n</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area19" value="Limpieza de datos"><label for="area19">Limpieza de datos</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area20" value="Curaci√≥n de datos"><label for="area20">Curaci√≥n de datos</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area21" value="An√°lisis de datos"><label for="area21">An√°lisis de datos</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area22" value="Visualizaci√≥n"><label for="area22">Visualizaci√≥n</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area23" value="Reproducibilidad"><label for="area23">Reproducibilidad</label></div>
                    </div>
                </div>
                <div class="category-section">
                    <div class="category-title">Escritura y Edici√≥n</div>
                    <div class="checkbox-grid">
                        <div class="checkbox-card"><input type="checkbox" id="area24" value="Generaci√≥n de texto"><label for="area24">Generaci√≥n de texto</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area25" value="Correcci√≥n y edici√≥n"><label for="area25">Correcci√≥n y edici√≥n</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area26" value="Resumen de texto"><label for="area26">Resumen de texto</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area27" value="Conclusiones"><label for="area27">Conclusiones</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area28" value="Ajuste de tono"><label for="area28">Ajuste de tono</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area29" value="Traducci√≥n"><label for="area29">Traducci√≥n</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area30" value="Reformateo"><label for="area30">Reformateo</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area31" value="Divulgaci√≥n"><label for="area31">Divulgaci√≥n</label></div>
                    </div>
                </div>
                <div class="category-section">
                    <div class="category-title">Revisi√≥n √âtica</div>
                    <div class="checkbox-grid">
                        <div class="checkbox-card"><input type="checkbox" id="area32" value="An√°lisis de sesgo"><label for="area32">An√°lisis de sesgo</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area33" value="Riesgos √©ticos"><label for="area33">Riesgos √©ticos</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area34" value="Normas √©ticas"><label for="area34">Normas √©ticas</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area35" value="Confidencialidad"><label for="area35">Confidencialidad</label></div>
                    </div>
                </div>
                <div class="category-section">
                    <div class="category-title">Revisi√≥n y Supervisi√≥n</div>
                    <div class="checkbox-grid">
                        <div class="checkbox-card"><input type="checkbox" id="area36" value="Evaluaci√≥n de calidad"><label for="area36">Evaluaci√≥n de calidad</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area37" value="Tendencias"><label for="area37">Tendencias</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area38" value="Limitaciones"><label for="area38">Limitaciones</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area39" value="Recomendaciones"><label for="area39">Recomendaciones</label></div>
                        <div class="checkbox-card"><input type="checkbox" id="area40" value="Apoyo publicaci√≥n"><label for="area40">Apoyo publicaci√≥n</label></div>
                    </div>
                </div>
                <div class="buttons"><button class="btn-secondary" onclick="prevStep()">‚Üê Anterior</button><button class="btn-primary" onclick="nextStep()">Siguiente ‚Üí</button></div>
            </div>
            <div class="step-content" id="step4">
                <h2 class="step-title">üìù Detalles Adicionales</h2>
                <p class="step-description">Proporcione informaci√≥n complementaria sobre el uso de IAGen.</p>
                <div class="form-group"><label>T√≠tulo del manuscrito: *</label><input type="text" id="titulo" placeholder="Ingrese el t√≠tulo de su trabajo"></div>
                <div class="form-group"><label>Descripci√≥n del uso de IAGen: *</label><textarea id="descripcion" placeholder="Describa c√≥mo utiliz√≥ la IA generativa..."></textarea></div>
                <div class="form-group"><label>Comentarios adicionales:</label><textarea id="comentarios" placeholder="Informaci√≥n adicional relevante..."></textarea></div>
                <div class="note-box"><strong>Nota importante:</strong><p>Los autores son totalmente responsables de revisar y validar todos los resultados generados por los LLM.</p><p>Mantenga los historiales de conversaci√≥n como evidencia.</p></div>
                <div class="buttons"><button class="btn-secondary" onclick="prevStep()">‚Üê Anterior</button><button class="btn-primary" onclick="nextStep()">Siguiente ‚Üí</button></div>
            </div>
            <div class="step-content" id="step5">
                <h2 class="step-title">‚úÖ Resumen de la Declaraci√≥n</h2>
                <p class="step-description">Revise la informaci√≥n antes de generar los documentos.</p>
                <div id="summaryContent"></div>
                <div class="buttons"><button class="btn-secondary" onclick="prevStep()">‚Üê Anterior</button><button class="btn-primary" onclick="nextStep()">Generar Documentos ‚Üí</button></div>
            </div>
            <div class="step-content" id="step6">
                <h2 class="step-title">üéâ ¬°Documentos Generados!</h2>
                <p class="step-description">Sus documentos est√°n listos para descargar.</p>
                <div class="alert alert-info">‚ú® <strong>Compatible con OJS</strong></div>
                <div class="download-section">
                    <div class="download-card" onclick="downloadDeclaration()"><div class="download-icon">üìÑ</div><div class="download-title">Declaraci√≥n IAGen</div><div class="download-desc">Formulario oficial</div></div>
                    <div class="download-card" onclick="downloadLetter()"><div class="download-icon">‚úâÔ∏è</div><div class="download-title">Carta de Declaraci√≥n</div><div class="download-desc">Carta para revista</div></div>
                </div>
                <div style="margin-top: 30px;"><h3 style="margin-bottom: 15px;">Vista Previa:</h3><div id="documentsPreview"></div></div>
                <div class="buttons" style="justify-content: center;"><button class="btn-secondary" onclick="location.reload()">Nueva Declaraci√≥n</button></div>
            </div>
        </div>
    </div>
    <script>
let currentStep=1,totalSteps=6,formData={},contadorAutores=1;function agregarAutor(){contadorAutores++;const a=document.getElementById("autoresContainer"),b=document.createElement("div");b.className="autor-card",b.setAttribute("data-autor",contadorAutores),b.innerHTML=`<div style="display: flex; justify-content: space-between; margin-bottom: 15px;"><h3 style="color: #B8346D; margin: 0;">Autor ${contadorAutores}</h3><button class="btn-remove-autor" onclick="eliminarAutor(${contadorAutores})">‚úï Eliminar</button></div><div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-bottom: 15px;"><div class="form-group" style="margin-bottom: 0;"><label>Nombre(s): *</label><input type="text" class="autor-nombre" data-autor="${contadorAutores}"></div><div class="form-group" style="margin-bottom: 0;"><label>Primer Apellido: *</label><input type="text" class="autor-apellido1" data-autor="${contadorAutores}"></div><div class="form-group" style="margin-bottom: 0;"><label>Segundo Apellido:</label><input type="text" class="autor-apellido2" data-autor="${contadorAutores}"></div></div><div class="form-group"><label>Email: *</label><input type="email" class="autor-email" data-autor="${contadorAutores}"></div><div class="form-group"><label>Afiliaci√≥n: *</label><input type="text" class="autor-afiliacion" data-autor="${contadorAutores}"></div>`,a.appendChild(b)}function eliminarAutor(a){const b=document.querySelector(`.autor-card[data-autor="${a}"]`);b&&b.remove()}function obtenerAutores(){const a=[];return document.querySelectorAll(".autor-card").forEach((b,c)=>{const d=b.getAttribute("data-autor"),e=b.querySelector(`.autor-nombre[data-autor="${d}"]`).value.trim(),f=b.querySelector(`.autor-apellido1[data-autor="${d}"]`).value.trim(),g=b.querySelector(`.autor-apellido2[data-autor="${d}"]`).value.trim(),h=b.querySelector(`.autor-email[data-autor="${d}"]`).value.trim(),i=b.querySelector(`.autor-afiliacion[data-autor="${d}"]`).value.trim();(e||f||h||i)&&a.push({numero:c+1,nombre:e,apellido1:f,apellido2:g,nombreCompleto:`${e} ${f}${g?" "+g:""}`.trim(),email:h,afiliacion:i})}),a}function updateProgress(){const a=(currentStep-1)/(totalSteps-1)*100;document.getElementById("progressFill").style.width=a+"%",document.querySelectorAll(".step").forEach((a,b)=>{const c=b+1;a.classList.remove("active","completed"),c===currentStep?a.classList.add("active"):c<currentStep&&a.classList.add("completed")}),document.querySelectorAll(".step-content").forEach((a,b)=>{a.classList.remove("active"),b+1===currentStep&&a.classList.add("active")})}function validateStep(){if(1===currentStep){const a=obtenerAutores();if(0===a.length)return alert("Debe agregar al menos un autor"),!1;const b=a[0];if(!b.nombre||!b.apellido1||!b.email||!b.afiliacion)return alert("Complete todos los campos del primer autor"),!1;const c=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;for(let b of a)if(b.email&&!c.test(b.email))return alert(`Email inv√°lido: Autor ${b.numero}`),!1;for(let b=1;b<a.length;b++)if(!a[b].nombre||!a[b].apellido1||!a[b].email||!a[b].afiliacion)return alert(`Complete campos del Autor ${a[b].numero} o elim√≠nelo`),!1;if(!document.querySelector('input[name="responsabilidad"]:checked'))return alert("Seleccione responsabilidad"),!1}if(2===currentStep){const a=document.getElementById("llm1").value.trim(),b=document.getElementById("version1").value.trim(),c=document.getElementById("proveedor1").value.trim(),d=document.getElementById("fecha1").value;if(!a||!b||!c||!d)return alert("Complete todos los campos del LLM 1"),!1}if(4===currentStep){const a=document.getElementById("titulo").value.trim(),b=document.getElementById("descripcion").value.trim();if(!a||!b)return alert("Complete t√≠tulo y descripci√≥n"),!1}return!0}function collectFormData(){formData.autores=obtenerAutores(),formData.responsabilidad=document.querySelector('input[name="responsabilidad"]:checked')?.value||"",formData.llm1=document.getElementById("llm1").value,formData.version1=document.getElementById("version1").value,formData.proveedor1=document.getElementById("proveedor1").value,formData.fecha1=document.getElementById("fecha1").value,formData.llm2=document.getElementById("llm2").value,formData.version2=document.getElementById("version2").value,formData.proveedor2=document.getElementById("proveedor2").value,formData.fecha2=document.getElementById("fecha2").value,formData.areas=[];for(let a=1;40>=a;a++){const b=document.getElementById("area"+a);b&&b.checked&&formData.areas.push(b.value)}formData.titulo=document.getElementById("titulo").value,formData.descripcion=document.getElementById("descripcion").value,formData.comentarios=document.getElementById("comentarios").value}function showSummary(){collectFormData();let a=`<div class="summary-card"><div class="summary-item"><div class="summary-label">Autores (${formData.autores.length}):</div><div class="summary-value">`;formData.autores.forEach((b,c)=>{a+=`<div style="margin-bottom: 10px; padding: 10px; background: white; border-radius: 4px;"><strong>Autor ${c+1}:</strong> ${b.nombreCompleto}<br><span style="color: #666; font-size: 13px;">${b.email} | ${b.afiliacion}</span></div>`}),a+=`</div></div><div class="summary-item"><div class="summary-label">Responsabilidad:</div><div class="summary-value">${formData.responsabilidad}</div></div><div class="summary-item"><div class="summary-label">Modelos:</div><div class="summary-value">${formData.llm1} (${formData.version1}) - ${formData.proveedor1}<br>${formData.llm2?formData.llm2+" ("+formData.version2+") - "+formData.proveedor2:""}</div></div><div class="summary-item"><div class="summary-label">T√≠tulo:</div><div class="summary-value">${formData.titulo}</div></div><div class="summary-item"><div class="summary-label">√Åreas (${formData.areas.length}):</div><ul class="summary-list">${formData.areas.slice(0,5).map(a=>"<li>"+a+"</li>").join("")}${formData.areas.length>5?"<li><em>... y "+(formData.areas.length-5)+" m√°s</em></li>":""}</ul></div></div>`,document.getElementById("summaryContent").innerHTML=a}function generateDocuments(){collectFormData();const a=new Date().toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"});let b="",c="";formData.autores.forEach((a,d)=>{b+=`<p><strong>Autor ${d+1}:</strong> ${a.nombreCompleto}</p><p><strong>Email:</strong> ${a.email}</p><p><strong>Afiliaci√≥n:</strong> ${a.afiliacion}</p>${d<formData.autores.length-1?"<br>":""}`,c+=`<br><br><p>_________________________</p><p>${a.nombreCompleto}</p>`});const d=`<div class="document-preview"><h2 style="text-align:center;color:#667eea;">DECLARACI√ìN DE USO DE IAGen</h2><p style="text-align:center;margin-bottom:20px;">Inteligencia Artificial Generativa</p><div class="doc-section-title">1. RESPONSABLES</div>${b}<p style="margin-top:15px;"><strong>Responsabilidad:</strong> ${formData.responsabilidad}</p><div class="doc-section-title">2. MODELOS</div><p><strong>Modelo 1:</strong> ${formData.llm1} (${formData.version1}) - ${formData.proveedor1}</p><p><strong>Fecha:</strong> ${formData.fecha1}</p>${formData.llm2?`<p><strong>Modelo 2:</strong> ${formData.llm2} (${formData.version2}) - ${formData.proveedor2}</p><p><strong>Fecha:</strong> ${formData.fecha2}</p>`:""}<div class="doc-section-title">3. T√çTULO</div><p>${formData.titulo}</p><div class="doc-section-title">4. √ÅREAS</div><ul>${formData.areas.map(a=>"<li>"+a+"</li>").join("")}</ul><div class="doc-section-title">5. DESCRIPCI√ìN</div><p>${formData.descripcion}</p>${formData.comentarios?`<div class="doc-section-title">6. COMENTARIOS</div><p>${formData.comentarios}</p>`:""}<div class="note-box"><strong>DECLARACI√ìN:</strong><p>Los autores declaran haber revisado y validado todos los resultados generados.</p></div><div style="margin-top:40px;"><p>Fecha: ${a}</p>${c}</div></div>`,e=formData.autores.map(a=>a.nombreCompleto).join(" y");let f="";formData.autores.forEach(a=>{f+=`<br><br><p>_________________________</p><p>${a.nombreCompleto}</p><p>${a.email}</p><p>${a.afiliacion}</p>`});const g=`<div class="document-preview"><div style="text-align:right;margin-bottom:30px;">${a}</div><p>Estimado/a Editor/a,</p><p style="text-align:justify;margin:15px 0;">Por medio de la presente, ${1===formData.autores.length?"yo":"nosotros"}, ${e}, autor${formData.autores.length>1?"es":""} del manuscrito "<strong>${formData.titulo}</strong>", ${1===formData.autores.length?"declaro":"declaramos"} el uso de herramientas de IAGen.</p><p style="text-align:justify;margin:15px 0;">${1===formData.autores.length?"He":"Hemos"} utilizado: ${formData.llm1} (${formData.version1})${formData.llm2?" y "+formData.llm2+" ("+formData.version2+")":""}.</p><p style="text-align:justify;margin:15px 0;">${formData.descripcion}</p><p style="text-align:justify;margin:15px 0;">${1===formData.autores.length?"Declaro":"Declaramos"} haber revisado todos los resultados. ${1===formData.autores.length?"Conservo":"Conservamos"} los historiales de conversaci√≥n.</p><p>Atentamente,</p><div style="margin-top:50px;">${f}</div></div>`;document.getElementById("documentsPreview").innerHTML=`<div style="margin-bottom:30px;"><h4 style="color:#667eea;margin-bottom:15px;">üìÑ Declaraci√≥n</h4>${d}</div><div><h4 style="color:#667eea;margin-bottom:15px;">‚úâÔ∏è Carta</h4>${g}</div>`}function downloadDeclaration(){collectFormData();const a=new Date().toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"});let b="",c="";formData.autores.forEach((a,d)=>{b+=`<p><strong>Autor ${d+1}:</strong> ${a.nombreCompleto}</p><p><strong>Email:</strong> ${a.email}</p><p><strong>Afiliaci√≥n:</strong> ${a.afiliacion}</p>${d<formData.autores.length-1?"<br>":""}`,c+=`<br><br><p>_________________________</p><p>${a.nombreCompleto}</p>`});let d=`<!DOCTYPE html><html lang="es"><head><meta charset="UTF-8"><title>Declaraci√≥n IAGen</title><style>body{font-family:Arial;padding:40px;line-height:1.6}h1{color:#667eea;text-align:center}.section{margin:20px 0}.section-title{font-weight:bold;color:#667eea;margin-top:20px}.note{background:#fff3cd;padding:15px;margin:20px 0;border-left:4px solid #ffc107}</style></head><body><h1>DECLARACI√ìN DE USO DE IAGen</h1><p style="text-align:center;">Inteligencia Artificial Generativa</p><div class="section"><div class="section-title">1. RESPONSABLES</div>${b}<p style="margin-top:15px;"><strong>Responsabilidad:</strong> ${formData.responsabilidad}</p></div><div class="section"><div class="section-title">2. MODELOS</div><p><strong>Modelo 1:</strong> ${formData.llm1} (${formData.version1}) - ${formData.proveedor1}</p><p><strong>Fecha:</strong> ${formData.fecha1}</p>${formData.llm2?`<p><strong>Modelo 2:</strong> ${formData.llm2} (${formData.version2})</p>`:""}</div><div class="section"><div class="section-title">3. T√çTULO</div><p>${formData.titulo}</p></div><div class="section"><div class="section-title">4. √ÅREAS</div><ul>${formData.areas.map(a=>"<li>"+a+"</li>").join("")}</ul></div><div class="section"><div class="section-title">5. DESCRIPCI√ìN</div><p>${formData.descripcion}</p></div>${formData.comentarios?`<div class="section"><div class="section-title">6. COMENTARIOS</div><p>${formData.comentarios}</p></div>`:""}<div class="note"><strong>DECLARACI√ìN:</strong><p>Los autores declaran haber revisado todos los resultados.</p></div><div style="margin-top:40px;"><p>Fecha: ${a}</p>${c}</div></body></html>`;const e=new Blob([d],{type:"text/html"}),f=URL.createObjectURL(e),g=document.createElement("a");g.href=f,g.download="Declaracion_IAGen.html",g.click(),URL.revokeObjectURL(f),alert("Descargado. Abre el archivo y usa Ctrl+P para PDF.")}function downloadLetter(){collectFormData();const a=new Date().toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),b=formData.autores.map(a=>a.nombreCompleto).join(" y");let c="";formData.autores.forEach(a=>{c+=`<br><br><p>_________________________</p><p>${a.nombreCompleto}</p><p>${a.email}</p><p>${a.afiliacion}</p>`});let d=`<!DOCTYPE html><html lang="es"><head><meta charset="UTF-8"><title>Carta Declaraci√≥n</title><style>body{font-family:'Times New Roman',serif;padding:60px;line-height:1.8}p{text-align:justify;margin-bottom:15px}</style></head><body><div style="text-align:right;margin-bottom:30px;">${a}</div><p>Estimado/a Editor/a,</p><p>Por medio de la presente, ${1===formData.autores.length?"yo":"nosotros"}, ${b}, autor${formData.autores.length>1?"es":""} del manuscrito "<strong>${formData.titulo}</strong>", ${1===formData.autores.length?"declaro":"declaramos"} el uso de IAGen.</p><p>${1===formData.autores.length?"He":"Hemos"} utilizado: ${formData.llm1} (${formData.version1})${formData.llm2?" y "+formData.llm2:""}</p><p>${formData.descripcion}</p><p>${1===formData.autores.length?"Declaro":"Declaramos"} haber revisado todos los resultados. ${1===formData.autores.length?"Conservo":"Conservamos"} los historiales.</p><p>Atentamente,</p><div style="margin-top:50px;">${c}</div></body></html>`;const e=new Blob([d],{type:"text/html"}),f=URL.createObjectURL(e),g=document.createElement("a");g.href=f,g.download="Carta_Declaracion_IAGen.html",g.click(),URL.revokeObjectURL(f),alert("Descargado. Abre el archivo y usa Ctrl+P para PDF.")}function nextStep(){validateStep()&&(currentStep<totalSteps&&(currentStep++,updateProgress(),5===currentStep&&showSummary(),6===currentStep&&generateDocuments()))}function prevStep(){currentStep>1&&(currentStep--,updateProgress())}updateProgress();
    </script>
</body>
</html>
